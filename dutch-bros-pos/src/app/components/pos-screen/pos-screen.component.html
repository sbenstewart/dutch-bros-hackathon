<div class="pos-container">
  <header>
    <h1>Dutch Bros POS System</h1>
  </header>

  <main class="pos-layout">
    <div class="menu-selection-panel">
      <h2>Menu Items</h2>
      <div *ngFor="let product of availableProducts()" 
           class="menu-item-button" 
           (click)="selectProduct(product)">
        {{ product.name }} 
        <span class="price">${{ product.cost.toFixed(2) }}</span>
      </div>
    </div>

    <div class="center-panel">
      <ng-container *ngIf="selectedProduct() && selectedProductModifiers() as modifiers">
        <app-modifier-selector
          [product]="selectedProduct()!"
          [modifierChain]="modifiers"
          (orderItemReady)="addToOrder($event)"
          (cancel)="clearSelection()"
        ></app-modifier-selector>
      </ng-container>

      <ng-container *ngIf="!selectedProduct()">
        <h2>Current Order (Total Items: {{ currentOrder().length }})</h2>
        <div *ngIf="currentOrder().length === 0">Tap a menu item to begin.</div>
        <ul>
          <li *ngFor="let item of currentOrder()">
            <strong>{{ item.size }} {{ item.name }}</strong> - ${{ item.unit_price.toFixed(2) }}
            <span *ngIf="item.child_items.length > 0"> (+ {{ item.child_items.length }} mods)</span>
          </li>
        </ul>
        <button *ngIf="currentOrder().length > 0">Finalize & Pay</button>
      </ng-container>
    </div>

  </main>
</div>